---
layout: post
title: TID api적용후기
---

노마드 코드에서 api를 활용해 영화 리스트를 불러오는 것을 실습했습니다  
그런데, 항해를 시작할때, 영화 정보를 크롤링해서 리스트를 만드는게 생각이 나서 이번엔 api를 이용해  
영화 리스트를 만들어 보고 싶은 생각에 국내에 영화 api를 제공해주는 사이트가 있는지 검색해보았습니다.  
두 군데에서 영화 관련 api를 지원해주는데... 영화진흥위원회와 네이버 영화 검색api

#### 영화진흥위원회 API

영화에 대한 상세정보를 텍스트로 받아서 좋았습니다.  
영화 고유번호, 영화개봉일, 장르.... 필요한 데이터가 보여서 바로 회원가입하고 api리스트를 뽑았는데...
썸네일, description, 상세link(상세 데이터가 있긴했습니다)등.... 제가 원하는 데이터는 제공해주지 않았습니다.

프론트에선 적용 난이도는 굉장히 쉬운편이라고 생각합니다.

#### 네이버 검색API

우선 네이버 검색API는 프론트에서 적용하기엔, cors이슈가 있었습니다..  
개발 로컬 환경에선 크게 문제가 되지 않았지만, 저는 깃허브 페이지를 통해 배포를 하는걸로 방향성을 잡고 있어서 이를 해결할 방법을 찾기로했습니다.

1. 프록시 사용
   프록시를 사용하면 해결은 할수 있지만, 역시 배포 후 먹통되는 이슈가 있어서 보류했습니다.
2. 서버에서 데이터를 받아서 처리
   네이버는 서버프로그래밍(python, jsp, php, node.js 등)을 통해서만 호출되는걸 권장하고 있습니다...
   네이버 설명으로는 id, secret도용을 막기위한 보안적인 조치때문이라는데, 공부하는 입장에서는 많이 버거웠습니다..  
   그래서 서버를 만들면 되지 않을까 해서 node.js에 express를 사용해 간단한 서버를 구축하고  
   단순히 api호출 관련내용만 전달하도록 구성했습니다.

결과적으로 서버를 구성해서 하는 방식은 성공하긴 했는데, 받은 데이터를 보니... 제가 원하는 데이터는 아니었던것 같습니다.  
그리고 추가적으로 서버도 pm2를 사용해 서비스를 계속 이어나갈수 있는데, 이 pm2를 사용하게 되면 제 컴퓨터가 사실상 서버가 되어서 이동하거나,  
컴퓨터가 꺼지면 데이터 검색도 하지 못한다고 이해했습니다. 그래서 아마존 같은데에다가 올려서 돌려야되나 생각을 했는데..  
이해와 공부하는 과정이 시간도 많이 걸리고, 결과적으론 api가 제공해주는 데이터가 제가 원하는 데이터는 아니었으므로 일단  
로컬환경에서만 성공을 하고, 진흥위원회 api와 검색 api를 어떻게 합치면 되지 않을까?? 라는 생각을 하고 있습니다..

### 결론

결국에 두 사이트에서 api를 적용하고 데이터를 직접 받아보니 드는 생각은... 문서를 잘 읽어보자....  
그리고 자바스크립트 `fetch()` 함수와 axios 플러그인에 대해서 좀 공부가 되었던 시간이었습니다.
~callback func, promise, async-await 포함해서...~
아직 api를 받아오기까지 개념에 대해 공부하고 알아가는 과정이 2일이나 걸리긴 했지만, 그래도 로컬환경에서라도 구현 성공해서 크게 만족하고 있습니다.

api를 받아오면서 느끼는 점은 이렇게 받아오는게 어렵게 구성되있고,  
원하는 데이터가 없다면... 크롤링으로 받아오는게 더 현명하다는 생각이 들었습니다....

[axios와fetch](https://velog.io/@shin6403/React-axios%EB%9E%80-feat.-Fetch-API)
[네이버api받아오기참고](https://msyu1207.tistory.com/entry/React%EB%A1%9C-%EC%98%81%ED%99%94-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EA%B2%80%EC%83%89%ED%95%B4%EB%B3%B4%EC%9E%90-%EB%91%90%EB%B2%88%EC%A7%B8-%EB%84%A4%EC%9D%B4%EB%B2%84-API-%EC%82%AC%EC%9A%A9-CORS-%EC%84%A4%EC%A0%95-%ED%95%98%EA%B8%B0)
